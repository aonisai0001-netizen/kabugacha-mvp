<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8T8EFW2ZNY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-8T8EFW2ZNY');
</script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>株ガチャ未来予測シミュレーター MVP</title>
  <style>
    :root{
      --bg:#0b0f1a;
      --panel:#12172a;
      --panel-2:#0f1324;
      --text:#e6e9f2;
      --muted:#9aa3b2;
      --accent:#7c5cff;
      --good:#32d583;
      --warn:#f79009;
      --bad:#ff6b6b;
      --gold:#ffd166;
      --pink:#ff7ab6;
      --cyan:#67e8f9;
    }
    *{box-sizing:border-box;}
    body{
      margin:0; background:radial-gradient(1200px 600px at 50% -10%, #1e2440, var(--bg));
      color:var(--text); font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
      min-height:100vh; display:flex; justify-content:center; padding:16px;
    }
    .wrap{width:min(980px, 100%); display:grid; gap:12px;}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:12px 14px; background:linear-gradient(180deg, #151b33, #0e1224);
      border:1px solid rgba(255,255,255,.06); border-radius:14px;
      position:sticky; top:0; z-index:5; backdrop-filter: blur(6px);
    }
    header .title{font-weight:800; letter-spacing:.02em;}
    header .sub{font-size:12px; color:var(--muted);}
    .controls{
      display:grid; grid-template-columns: 1fr 1fr; gap:8px;
      background:var(--panel); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:12px;
    }
    .control{
      background:var(--panel-2); border:1px solid rgba(255,255,255,.06);
      padding:10px; border-radius:12px; display:grid; gap:6px;
    }
    label{font-size:12px; color:var(--muted);}
    select, button{
      width:100%; font-size:16px; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.12);
      background:#0b1022; color:var(--text);
      outline:none;
    }
    button{cursor:pointer;}
    .gacha-area{
      background:var(--panel); border:1px solid rgba(255,255,255,.06); border-radius:18px;
      padding:16px; display:grid; gap:12px; position:relative; overflow:hidden;
    }
    .roll-btn{
      font-size:20px; font-weight:800; padding:16px;
      background:linear-gradient(135deg, #7c5cff, #34d399);
      border:none; box-shadow:0 8px 22px rgba(124,92,255,.35);
      transition:transform .06s ease, filter .2s ease;
    }
    .roll-btn:active{transform:translateY(2px) scale(0.98);}
    .result{
      background:#0a0f20; border:1px dashed rgba(255,255,255,.12); border-radius:14px;
      padding:14px; display:grid; gap:8px; min-height:160px;
    }
    .row{display:flex; justify-content:space-between; gap:8px;}
    .k{color:var(--muted); font-size:13px;}
    .v{font-weight:700;}
    .rarity-badge{
      display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-weight:900; letter-spacing:.06em;
      border:1px solid rgba(255,255,255,.18);
      text-shadow:0 0 8px rgba(255,255,255,.35);
    }
    .R{background:rgba(154,163,178,.12); color:#c8ceda;}
    .SR{background:rgba(103,232,249,.12); color:var(--cyan);}
    .SSR{background:rgba(255,209,102,.12); color:var(--gold);}
    .SSRp{background:rgba(255,122,182,.12); color:var(--pink);}
    .SSRpp{background:rgba(124,92,255,.16); color:#c4b5fd;}
    .big{
      font-size:22px; font-weight:900;
    }
    .pos{color:var(--good);}
    .neg{color:var(--bad);}
    .share{
      display:grid; grid-template-columns: 1fr 1fr 1fr; gap:8px;
    }
    .share button{
      background:#0b1022; border:1px solid rgba(255,255,255,.12); font-weight:700;
    }
    .history{
      background:var(--panel); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:12px;
      display:grid; gap:8px;
    }
    .history .item{
      background:var(--panel-2); border:1px solid rgba(255,255,255,.06);
      padding:8px 10px; border-radius:10px; display:flex; justify-content:space-between; gap:8px; font-size:13px;
      align-items:center;
    }
    .ads{
      background:#0a0f20; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px;
      color:var(--muted); font-size:12px; text-align:center;
    }
    .ads strong{color:#d1d5db;}
    .note{
      font-size:12px; color:var(--muted); line-height:1.6;
      background:transparent; padding:0 4px;
    }
    .confetti{
      position:absolute; inset:-20% -10% auto -10%; height:140%;
      pointer-events:none; opacity:0; transition:opacity .2s ease;
      background:
        radial-gradient(6px 10px at 10% 10%, #fff 40%, transparent 41%),
        radial-gradient(6px 10px at 30% 20%, #67e8f9 40%, transparent 41%),
        radial-gradient(6px 10px at 60% 30%, #ffd166 40%, transparent 41%),
        radial-gradient(6px 10px at 80% 10%, #ff7ab6 40%, transparent 41%),
        radial-gradient(6px 10px at 20% 60%, #a78bfa 40%, transparent 41%),
        radial-gradient(6px 10px at 70% 70%, #34d399 40%, transparent 41%);
      animation: fall 1.6s linear infinite;
      mix-blend-mode: screen;
    }
    .confetti.show{opacity:.9;}
    @keyframes fall{
      0%{transform:translateY(-10%) rotate(0deg);}
      100%{transform:translateY(10%) rotate(10deg);}
    }
    @media (max-width:720px){
      .controls{grid-template-columns:1fr;}
      .share{grid-template-columns:1fr;}
      header{position:static;}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="title">株ガチャ 未来予測シミュレーター</div>
        <div class="sub">ワンタップで運試し → 未来株価とレア度が出るMVP</div>
      </div>
      <div class="sub" id="rollCount">総ガチャ回数: 0</div>
    </header>
    <div class="ads">
      <strong>広告枠（上）</strong><br/>
      ※ ここに AdSense / アフィ広告コードを貼り付け
    </div>
    <section class="controls">
      <div class="control">
        <label>時間軸</label>
        <select id="years">
          <option value="1">1年</option>
          <option value="3">3年</option>
          <option value="5">5年</option>
          <option value="10" selected>10年</option>
        </select>
      </div>
      <div class="control">
        <label>シナリオ</label>
        <select id="scenario">
          <option value="optimistic">楽観</option>
          <option value="realistic" selected>現実</option>
          <option value="pessimistic">悲観</option>
        </select>
      </div>
    </section>
    <section class="gacha-area">
      <div class="confetti" id="confetti"></div>
      <button class="roll-btn" id="rollBtn">ガチャを回す</button>
      <div class="result" id="result">
        <div class="note">「回す」を押すと、銘柄・未来価格・CAGR・レア度が一発で出ます。</div>
      </div>
      <div class="share">
        <button id="shareX">Xでシェア</button>
        <button id="shareLine">LINEでシェア</button>
        <button id="copyText">結果文をコピー</button>
      </div>
      <div class="note" id="hint">
        SSR+ 以上が出たらスクショ推奨。何回でも回せます。
      </div>
    </section>
    <section class="history">
      <div class="title" style="font-weight:800;">直近の履歴（最大10件）</div>
      <div id="historyList"></div>
    </section>
    <div class="ads">
      <strong>広告枠（下）</strong><br/>
      ※ 結果の余韻の直後に当たる最重要枠
    </div>
    <div class="note">
      免責:本ツールは娯楽・学習目的のシミュレーションです。投資判断は自己責任で行ってください。
    </div>
  </div>
<script>
(()=>{const e=[{symbol:"AAPL",name:"Apple",base:190},{symbol:"MSFT",name:"Microsoft",base:420},{symbol:"AMZN",name:"Amazon",base:170},{symbol:"NVDA",name:"NVIDIA",base:140},{symbol:"TSLA",name:"Tesla",base:250},{symbol:"GOOG",name:"Alphabet",base:175},{symbol:"META",name:"Meta",base:500},{symbol:"V",name:"Visa",base:280},{symbol:"JPM",name:"JPMorgan",base:210},{symbol:"KO",name:"Coca-Cola",base:60}],t=[{key:"R",label:"R",prob:.7,min:-10,max:20,cls:"R"},{key:"SR",label:"SR",prob:.2,min:20,max:100,cls:"SR"},{key:"SSR",label:"SSR",prob:.08,min:100,max:300,cls:"SSR"},{key:"SSR+",label:"SSR+",prob:.015,min:300,max:1e3,cls:"SSRp"},{key:"SSR++",label:"SSR++",prob:.005,min:1e3,max:1600,cls:"SSRpp"}],l=document.getElementById("years"),a=document.getElementById("scenario"),n=document.getElementById("rollBtn"),s=document.getElementById("result"),o=document.getElementById("historyList"),r=document.getElementById("rollCount"),c=document.getElementById("confetti"),i=document.getElementById("shareX"),u=document.getElementById("shareLine"),d=document.getElementById("copyText");let b="",p=Number(localStorage.getItem("rollCount")||0);const m=e=>e[Math.floor(Math.random()*e.length)];function y(){const e=Math.random();let l=0;for(const a of t)if(l+=a.prob,e<=l)return a;return t[0]}function h(e){const t=g();if(o.innerHTML="",!t.length)return void(o.innerHTML='<div class="note">まだ履歴がありません。</div>');for(const e of t){const t=document.createElement("div");t.className="item",t.innerHTML=`\n        <div>\n          <strong>${e.rarity}</strong> ${e.symbol}\n          <span style="color:var(--muted)">(${e.years}年/${e.scenarioJP})</span>\n        </div>\n        <div class="${e.totalReturnPct>=0?"pos":"neg"}">${f(e.totalReturnPct)}</div>\n      `,o.appendChild(t)}}function f(e){return(e>=0?"+":"")+e.toFixed(1)+"%"}function g(){try{return JSON.parse(localStorage.getItem("history")||"[]")}catch(e){return[]}}function v(){const t=Number(l.value),n=a.value,o="optimistic"===n?"楽観":"pessimistic"===n?"悲観":"現実",r=m(e),i=y();let u=Math.random();u=function(e,t){return"optimistic"===t?Math.sqrt(e):"pessimistic"===t?e*e:e}(u,n);let d=i.min+u*(i.max-i.min);const v=r.base,k=v*(1+d/100),L=function(e,t){return 100*(Math.pow(1+e/100,1/t)-1)}(d,t),M=1e6*(1+d/100);s.innerHTML=`\n      <div class="row">\n        <div class="k">銘柄</div>\n        <div class="v big">${r.symbol} <span style="font-size:12px;color:var(--muted);font-weight:600;">${r.name}</span></div>\n      </div>\n      <div class="row">\n        <div class="k">時間軸 / シナリオ</div>\n        <div class="v">${t}年 / ${o}</div>\n      </div>\n      <div class="row">\n        <div class="k">レアリティ</div>\n        <div class="v">\n          <span class="rarity-badge ${i.cls}">${i.label}</span>\n        </div>\n      </div>\n\n      <hr style="border:0;border-top:1px solid rgba(255,255,255,.06)"/>\n\n      <div class="row">\n        <div class="k">想定現在株価（仮）</div>\n        <div class="v">$${v.toFixed(2)}</div>\n      </div>\n      <div class="row">\n        <div class="k">想定未来株価</div>\n        <div class="v">$${k.toFixed(2)}</div>\n      </div>\n      <div class="row">\n        <div class="k">トータルリターン</div>\n        <div class="v ${d>=0?"pos":"neg"}">${f(d)}</div>\n      </div>\n      <div class="row">\n        <div class="k">CAGR（年平均）</div>\n        <div class="v ${L>=0?"pos":"neg"}">${f(L)}</div>\n      </div>\n      <div class="row">\n        <div class="k">投資100万円の未来価値</div>\n        <div class="v">${w(Math.round(M))} 円</div>\n      </div>\n\n      <div class="note" style="margin-top:6px;">\n        ※ レア確率に基づく"運試しシミュレーション"。現実の株価とは無関係です。\n      </div>\n    `,function(e){c.classList.remove("show"),"SSR+"!==e&&"SSR++"!==e||(c.classList.add("show"),setTimeout((()=>c.classList.remove("show")),1400))}(i.key),b=[`【株ガチャ結果】`,`${r.symbol} / ${t}年 / ${o}`,`レア: ${i.label}`,`未来リターン: ${f(d)}`,`CAGR: ${f(L)}`,`投資100万→ ${w(Math.round(M))}円`,`#株ガチャ #未来予測 #投資シミュレーション`].join("\n");const S=g();S.unshift({symbol:r.symbol,years:t,scenarioJP:o,rarity:i.label,totalReturnPct:d}),function(e){localStorage.setItem("history",JSON.stringify(e.slice(0,10)))}(S),h(),p++,localStorage.setItem("rollCount",p),x.textContent=`総ガチャ回数: ${p}`,n.disabled=!0,setTimeout((()=>n.disabled=!1),350)}function w(e){return e.toLocaleString("ja-JP")}n.addEventListener("click",v),i.addEventListener("click",(function(){if(!b)return;const e=encodeURIComponent(location.href),t=encodeURIComponent(b);window.open(`https://twitter.com/intent/tweet?text=${t}&url=${e}`,"_blank")})),u.addEventListener("click",(function(){if(!b)return;const e=encodeURIComponent(location.href),t=encodeURIComponent(b);window.open(`https://social-plugins.line.me/lineit/share?url=${e}&text=${t}`,"_blank")})),d.addEventListener("click",(async function(){if(!b)return;try{await navigator.clipboard.writeText(b),d.textContent="コピーしました",setTimeout((()=>d.textContent="結果文をコピー"),1200)}catch(e){alert("コピーに失敗しました。手動で選択してください。")}})),r.textContent=`総ガチャ回数: ${p}`,h()})();
</script>
</body>

</html>
